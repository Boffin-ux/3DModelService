(()=>{"use strict";const e=()=>{document.body.style.cssText="",window.scroll({top:document.body.dataset.scrollY})};(e=>{const t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds"),a=e=>e>=0&&e<=9?`0${e}`:e,c=()=>{const e=(()=>{const e=(new Date("19 july 2021")-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60);return{timerRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t}})();e.timerRemaining>0?(t.textContent=a(e.hours),n.textContent=a(e.minutes),o.textContent=a(e.seconds)):(t.textContent="00",n.textContent="00",o.textContent="00",clearInterval(s))},s=setInterval(c,1e3);c()})(),(()=>{const e=document.querySelector("menu");document.body.addEventListener("click",(t=>{const n=t.target;n.closest(".menu")?e.classList.add("active-menu"):n.closest("menu")?(n.matches(".close-btn")||n.closest("li"))&&e.classList.remove("active-menu"):n.closest("menu")||e.classList.remove("active-menu")}))})(),(()=>{const t=document.querySelector(".popup"),n=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");let a,c=!1,s=0;const l=()=>{const e=document.documentElement.clientWidth;a=requestAnimationFrame(l),s+=1,s<38&&e>=768?o.style.left=`${s}%`:cancelAnimationFrame(a)};n.forEach((e=>{e.addEventListener("click",(()=>{t.style.display="block",c?cancelAnimationFrame(a):(a=requestAnimationFrame(l),c=!0,(()=>{document.body.dataset.scrollY=window.scrollY;const e=window.innerWidth-document.body.offsetWidth;document.body.style.cssText=`\n      position: fixed;\n      top: -${window.scrollY}px;\n      left: 0;\n      width: 100%;\n      overflow: hidden;\n      height: 100vh;\n      padding-right: ${e}px;\n   `})())}))})),t.addEventListener("click",(n=>{let o=n.target;o.classList.contains("popup-close")?(t.style.display="none",cancelAnimationFrame(a),c=!1,s=0,e()):(o=o.closest(".popup-content"),o||(t.style.display="none",cancelAnimationFrame(a),c=!1,s=0,e()))}))})(),(()=>{const e=document.querySelectorAll("menu a:not(.close-btn"),t=document.querySelector("main > a"),n=e=>{const t=e.getAttribute("href").substr(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),n(e)}))})),t.addEventListener("click",(e=>{e.preventDefault(),n(t)}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,a)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(a)}))}))})(),(()=>{const e=document.querySelector(".portfolio-dots"),t=document.querySelectorAll(".portfolio-item");for(let n=0;n<=t.length-1;n++){const t=document.createElement("li");t.classList.add("dot"),e.append(t),0===n&&t.classList.add("dot-active")}})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),n=document.querySelector(".portfolio-content");let o,a=0;const c=(e,t,n)=>{e[t].classList.remove(n)},s=(e,t,n)=>{e[t].classList.add(n)},l=()=>{c(e,a,"portfolio-item-active"),c(t,a,"dot-active"),a++,a>=e.length&&(a=0),s(e,a,"portfolio-item-active"),s(t,a,"dot-active")},r=(e=3e3)=>{o=setInterval(l,e)};n.addEventListener("click",(n=>{n.preventDefault();const o=n.target;o.matches(".portfolio-btn, .dot")&&(c(e,a,"portfolio-item-active"),c(t,a,"dot-active"),o.matches("#arrow-right")?a++:o.matches("#arrow-left")?a--:o.matches(".dot")&&t.forEach(((e,t)=>{e===o&&(a=t)})),a>=e.length&&(a=0),a<0&&(a=e.length-1),s(e,a,"portfolio-item-active"),s(t,a,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn, .dot")||e.target.matches(".dot"))&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn, .dot")||e.target.matches(".dot"))&&r(1500)})),r(1500)})(),(()=>{const e=document.getElementById("command");let t="";const n=e=>{const n=e.target;"mouseover"===e.type&&n.closest("img")?(t=n.src,n.src=n.dataset.img):"mouseout"===e.type&&n.closest("img")&&(n.src=t)};e.addEventListener("mouseover",n),e.addEventListener("mouseout",n)})(),document.querySelector(".calc-block").addEventListener("input",(e=>{const t=e.target;t.value&&(t.closest(".calc-square")||t.closest(".calc-count")||t.closest(".calc-day"))&&(t.value=t.value.replace(/\D/g,""))})),(()=>{const e=document.getElementById("form2"),t=document.getElementById("form1"),n=document.getElementById("form3"),o=(e,t)=>{const n=e.target;n.value&&(n.closest(`#form${t}-name`)?n.value=n.value.replace(/[^а-яё\s]/gi,""):n.closest(`#form${t}-email`)?n.value=n.value.replace(/[^a-z@_.!~*'-]/gi,""):n.closest(`#form${t}-phone`)?n.value=n.value.replace(/[^0-9+]/g,""):n.closest(`#form${t}-message`)&&(n.value=n.value.replace(/[^а-яё\s0-9.?!,:;()""-]/g,"")))},a=(e,t)=>{const n=e.target;if(n.value&&(n.value=n.value.replace(/(^[-\s]*|[-\s]*$)/g,"").replace(/-{2,}/g,"-").replace(/\s{2,}/g," "),n.closest(`#form${t}-name`))){const e=n.value.split(" ");n.value=e.map((e=>`${e[0].toUpperCase()}${e.slice(1)}`)).join(" ")}};e.addEventListener("input",(e=>{o(e,"2")})),e.addEventListener("blur",(e=>{a(e,"2")}),!0),t.addEventListener("input",(e=>{o(e,"1")})),t.addEventListener("blur",(e=>{a(e,"1")}),!0),n.addEventListener("input",(e=>{o(e,"3")}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),s=document.getElementById("total");t.addEventListener("change",(t=>{const l=t.target;(l.matches("select")||l.matches("input"))&&(()=>{let t,l=0,r=1,i=1,d=!1,u=0;const m=n.options[n.selectedIndex].value,v=+o.value;c.value>1&&(r+=(c.value-1)/10),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5);const p=()=>{t=requestAnimationFrame(p),u+=l/20,u<=l?s.textContent=u:cancelAnimationFrame(t)};!d&&m&&v?(l=e*m*v*r*i,t=requestAnimationFrame(p),d=!0):(cancelAnimationFrame(t),d=!1,u=0,s.textContent=0)})()}))})(100),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),o=document.createElement("div");o.style.cssText="font-size: 2rem;",o.style.color="#fff";const a=(e,t)=>{e.preventDefault();const n=t.querySelectorAll("input");var a;t.appendChild(o),o.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="100px" height="100px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n      <rect x="19" y="29.5" width="12" height="41" fill="#40b5fd">\n         <animate attributeName="y" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" \n         values="17.199999999999996;29.5;29.5" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.2s"></animate>\n         <animate attributeName="height" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" \n         values="65.60000000000001;41;41" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.2s"></animate>\n      </rect>\n      <rect x="44" y="29.5" width="12" height="41" fill="#74c4f5">\n         <animate attributeName="y" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" \n         values="20.274999999999995;29.5;29.5" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.1s"></animate>\n         <animate attributeName="height" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" \n         values="59.45000000000001;41;41" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.1s"></animate>\n      </rect>\n      <rect x="69" y="29.5" width="12" height="41" fill="#9dd5f7">\n         <animate attributeName="y" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" \n         values="20.274999999999995;29.5;29.5" keySplines="0 0.5 0.5 1;0 0.5 0.5 1"></animate>\n         <animate attributeName="height" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" \n         values="59.45000000000001;41;41" keySplines="0 0.5 0.5 1;0 0.5 0.5 1"></animate>\n      </rect>\n      ',(a=new FormData(t),fetch("./server.php",{method:"POST",body:a})).then((e=>{if(200!==e.status)throw new Error("status network not 200");o.textContent="Спасибо! Мы скоро с вами свяжемся...",n.forEach((e=>e.value=""))})).catch((e=>{o.textContent="Что-то пошло не так...",n.forEach((e=>e.value="")),console.error(e)}))};e.addEventListener("submit",(t=>a(t,e))),t.addEventListener("submit",(e=>a(e,t))),n.addEventListener("submit",(e=>a(e,n)))})()})();